# WAV Converter
:ru:

Набор из трех программ, предназначенный для подготовки оцифрованного файла к
дальнейшей обработки

Версии и номера сборок:
|Название программы|Версия|Номер сборки|
|:------------|:------:|:---------|
|exHeader|0.2.7|build 39|
|exConverter|0.0.2|build 6|
|exStitcher|0.0.1|build 2|

## exHeader
:ru:

:information_source:**Пример вызова: C:\RLab\wavConverter\exHeader.exe foreign.wav**

:information_source:Доступные аргументы:

    -help - Выводит справочную информацию
	
	-debugmode - Включает режим отладки при котором выводятся дополнительные сообщения о работе программы
	
	-setlocale=LOCALE_name - Переключает локализацию. Будет проведена попытка загрузки доступной локализации из файла locales.loc
	
	-readheader - Программа считывает заголовок и выводит его параметры на экран
	
	-quiet - Программа не выводит никаких сообщнений во время работы
	
	-ver - Программа отображает свою версию и номер сборки
	

Программа считывает заголовок по меткам **RIFF, WAVE, fmt , data**, проверяет соответствие
требованиям формата и наличия минимально необходимых меток(всего 4). Дополнительные метки 
такие как **IDIT, EXIF, CSET, AGES, GENR** и т.п игнорируются и не будут прочитаны. По
итогу прочитанной из заголовка информацией, создается файл *convertParams.ini*, в который
записываются следующие данные - см. таблицу ниже
*Таблица 1. Структура covnertParams.ini*
|Тег|Описание|Пример|
|:---------------|:----------------------------------------|:------------------------|
|FSRC, FSND|Указатель на исходный файл|FFSRC>war1.wav>FSND|
|FNAM, FNND|Указатель на файл с записанным заголовком|FBOD>war1_header.dat>FBND|
|FBOD, FBND|Указатель на файл с WAV данными|FBOD>war1_body.dat>FBND|
|FTGT, FTND|Указатель на конечное имя файла|FTGT>war1_conv.wav>FTND|
|Convert|Флаг состояния конвертации|Convert=1|
|SampleRate|Частота дискретизации, Гц|SampleRate=192000|
|Channels|Количество каналов в файле|Channels=1|
|BitsPerSample|Глубина выборки в битах|BitsPerSample=8|
|SamplesInChannel|Количество выборок в одном канале|SamplesInChannel=5083700|

### Теги FSRC и FSND
Данная пара тегов указывает на исходный файл, содержащий заголовок и тело. Исходный файл
необходим для чтения заголовка, тела для конвертации

### Теги FNAM и FNND
Указывают на файл с исходным или модифицированным заголовком. Состав заголовка минимальный и
включает в себя только необходимые для правильного воспроизведения теги и данные

### Теги FBOD и FBND
Распологают информацией о имени файла с WAV данными. В процессе работы конвертера создается
файл с указанным в этих тегах именем и в него записываются конвертированные семплы

### Теги FTGT и FTND
Здесь хранится информация о имени конечного файла. После завершения процесса конвертации
тела и модификации заголовка, будет записан файл с заголовком, записанным в этих тегах

При втором запуске exHeader проверяет наличие файла *convertParams.ini*. В случае если
требуемый файл найден и был успешно открыт, из него считывается состояние флага *Convert*
В случае считывания 0 - работа программы будет прервана с указанием на то что файл тела
не был конвертирован. В случае считывания 1 - программа прочитает файл параметров и
сформирует из него новый заголовок, который будет записан с именем указанным в паре
тегов **FNAM и FNND**
____
## exConverter
:ru:

:information_source:**Пример вызова: C:\RLab\wavConverter\exConverter.exe [входящий файл]foreign.wav [конечный файл]foreign8.wav**

:information_source:Доступные аргументы:

    -ignoreini - Программа игнорирует файл convertParams.ini, даже если он обнаружен
	
	-ignorehead - Программа игнорирует первые 44 байта файла, даже если в файле нету заголовка
	
	-insrate=integer - Указание входной частоты дискретизации. Информация из заголовка или convertParams.ini игнорируется
	
	-outsrate=integer - Указание выходной частоты дискретизации. Выходная частота будет записана в convertParams.ini если он обнаружен и если Convert=0
	
	-inchannels=integer - Указание количество каналов исходного файла. Информация из заголовка или convertParams.ini игнорируется
	
	-outchannels=integer - Указание количества каналов выходного файла. Значение будет записано в convertParams.ini если он обнаружен и если Convert=0
	
	-inbits=integer - Указание глубины выборки исходного файла. Информация из заголовка или convertParams.ini игнорируется
	
	-outbits=integer - Указание глубины выборки конечного файла. Значение будет записано в convertParams.ini если он обнаружен и если Convert=0
	
	-insamples=integer - Задание суммарного количества выборок входного файла. Информация из заголовка или convertParams.ini игнорируется
	
	-outsamples=integer - Задание суммарного количества выборок выходного файла. Значение будет записано в convertParams.ini если он обнаружен и если Convert=0
	
	-insamplesmono=integer - Задание количества выборок в одном канале входного файла. Информация из заголовка или convertParams.ini игнорируется
	
	-outsamplesmono=integer - Задание количества выборок в одном канале выходного файла. Значение будет записано в convertParams.ini если он обнаружен и если Convert=0
	
	-debugmode - Включает режим отладки при котором выводятся дополнительные сообщения о работе программы
	
	-help - Отображение справочной информации
	
	-ver - Отображение версии программы и номера сборки
	

Программа конвертирует входящий файл смешивая входные каналы в один(моно), понижая
разрядность до 8 бит при этом сохраняя исходную частоту дискретизации

*Программа является частью комплекта программ для подготовки файлов к обработке*
*и поэтому сама по себе не имеет смысла*

Если в директории запуска обнаруживается *convertParams.ini* и в аргументах не указан
**-ignoreini** то данные из файла параметров будут иметь высший приоритет перед
аргументами командной строки

В ином случае программа прочитает данные из заголовка файла указанного как входящий и
будет проведена конвертация с понижением разрядности и совмещением каналов в один(моно)

**Проект находится в стадии создания прототипа**

**Работоспобность программ не гарантируется**

____
## exStitcher
:ru:

:information_source:Доступные аргументы:

    -ignoreini - Программа игнорирует файл convertParams.ini, даже если он обнаружен
	
    -ihed file_source - Ссылка на файл file_source содержащий заголовок
	
	-ibod file_source - Ссылка на файл file_source содержащий тело
	
	-itag file_source - Конечное имя файла
	
	-debugmode - Включает режим отладки при котором выводятся дополнительные сообщения о работе программы
	
	-help - Отображение справочной информации
	
	-ver - Отображение версии программы и номера сборки
	

Программа склеивает заголовок и тело, указанные в *convertParams.ini* и записывает
конечный результат. В случае отстутствия или невозможности открыть этот файл программа
прекращает свою работу

*В будущем сюда будет добавлена дополнительная информация по конвертеру - как только, так сразу* :wink: :wink: